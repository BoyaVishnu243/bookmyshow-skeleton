<!doctype html>
<html>
  <head>
    <title>SeatSelectionPage</title>
    <script>
      var block = new Set();
      var total = 0;
      var str = '';
      function selected(i) {
        var element = document.getElementById(i);
        element.classList.toggle('dark-mode');
      }
      function local(item, amount) {
        localStorage.setItem('seats', item);
        localStorage.setItem('total', amount);
      }
      function saveSeats() {
        str = '';
        total = 0;
        for (var i = 1; i <= 9; i++) {
          var element = document.getElementById(i);
          if (element.className == 'seat dark-mode' && !block.has(i)) {
            block.add(i);
          }
          if (element.className == 'seat dark-mode' && block.has(i)) {
            continue;
          }
          if (element.className == 'seat' && !block.has(i)) {
            continue;
          }
          if (element.className == 'seat' && block.has(i)) {
            block.delete(i);
          }
        }
        block.forEach((seat) => {
          str += seat + ' ';
        });
        console.log(block.size);
        total += 200 * block.size;
        local(str, total);
      }
      total += 200 * block.size;
      function display() {
        document.getElementById('line1').innerHTML =
          'Selected seats are :' + str;
        document.getElementById('line2').innerHTML =
          'Total amount is :' + total;
      }
    </script>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="flex-container">
      <div class="seat" id="1" onclick="selected(1)">01</div>
      <div class="seat" id="2" onclick="selected(2)">02</div>
      <div class="seat" id="3" onclick="selected(3)">03</div>
      <div class="seat" id="4" onclick="selected(4)">04</div>
      <div class="seat" id="5" onclick="selected(5)">05</div>
      <div class="seat" id="6" onclick="selected(6)">06</div>
      <div class="seat" id="7" onclick="selected(7)">07</div>
      <div class="seat" id="8" onclick="selected(8)">08</div>
      <div class="seat" id="9" onclick="selected(9)">09</div>
    </div>
    <div class="seat-select">
      <h4>You selected the seats below :</h4>
      <p id="line1"></p>
      <p id="line2"></p>
      <input
        type="button"
        value="save selection"
        onclick="saveSeats() & display()"
      />
      <input
        type="button"
        value="click to pay"
        onclick="window.location.href='payments.html'"
      />
    </div>
  </body>
</html>
